stages:
  - spawn

Main backend:
  stage: spawn
  trigger:
    include: backend/main/.gitlab-ci.yml
  only:
    changes:
      - backend/main/**/*
      - common/**/*
      - scripts/**/*

Web app frontend:
  stage: spawn
  trigger:
    include: frontend/web/app/.gitlab-ci.yml
  only:
    changes:
      - frontend/web/app/**/*
      - frontend/web/common/**/*
      - frontend/.gitlab-ci.yml
      - frontend/common/**/*
      - common/**/*
      - scripts/**/*

Landing frontend:
  stage: spawn
  trigger:
    include: frontend/web/landing/.gitlab-ci.yml
  only:
    changes:
      - frontend/web/landing/**/*
      - frontend/web/common/**/*
      - frontend/.gitlab-ci.yml
      - frontend/common/**/*
      - common/**/*
      - scripts/**/*

Admin frontend:
  stage: spawn
  trigger:
    include: frontend/web/admin/.gitlab-ci.yml
  only:
    changes:
      - frontend/web/admin/**/*
      - frontend/web/common/**/*
      - frontend/.gitlab-ci.yml
      - frontend/common/**/*
      - common/**/*
      - scripts/**/*

# This will probably go through AppCenter
# Native mobile frontend:
#   stage: spawn
#   trigger:
#     include: frontend/native-mobile/.gitlab-ci.yml
#   only:
#     changes:
#       - frontend/native-mobile/**/*
#       - frontend/common/**/*
#       - common/**/*
#       - scripts/**/*
